<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JS Todo List</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6 shadow-lg p-4 bg-white rounded">
            <h2 class="text-center mb-4">ğŸ“ Todo List</h2>

            <!-- Input -->
            <div class="input-group mb-3">
                <input type="text" class="form-control" id="taskname" placeholder="Enter your task">
                <button class="btn btn-success" onclick="addTask()">Add</button>
            </div>

            <!-- Alert -->
            <div id="alertBox" class="alert alert-warning d-none" role="alert">
                Please enter a task.
            </div>

            <!-- Task List -->
            <ul id="taskList" class="list-group mt-3"></ul>

            <!-- Clear All -->
            <button class="btn btn-outline-danger mt-4 w-100" onclick="clearAll()">
                Clear All Tasks
            </button>
        </div>
    </div>
</div>

<script>
    const taskInput = document.getElementById("taskname");
    const taskList = document.getElementById("taskList");
    const alertBox = document.getElementById("alertBox");

    function showAlert() {
        alertBox.classList.remove("d-none");
        setTimeout(() => alertBox.classList.add("d-none"), 2000);
    }

    function addTask() {
        const text = taskInput.value.trim();
        if (text === "") {
            showAlert();
            return;
        }

        const task = {
            text: text,
            completed: false
        };

        createTask(task);
        saveTasks();
        taskInput.value = "";
    }

    function createTask(task) {
        const li = document.createElement("li");
        li.className = "list-group-item d-flex justify-content-between align-items-center task-item";

        const leftDiv = document.createElement("div");
        leftDiv.className = "d-flex align-items-center gap-2";

        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.checked = task.completed;

        const span = document.createElement("span");
        span.textContent = task.text;
        if (task.completed) span.classList.add("completed");

        checkbox.onchange = () => {
            span.classList.toggle("completed");
            saveTasks();
        };

        leftDiv.appendChild(checkbox);
        leftDiv.appendChild(span);

        const rightDiv = document.createElement("div");

        const editBtn = document.createElement("button");
        editBtn.className = "btn btn-sm btn-primary me-2";
        editBtn.textContent = "Edit";
        editBtn.onclick = () => editTask(span);

        const deleteBtn = document.createElement("button");
        deleteBtn.className = "btn btn-sm btn-danger";
        deleteBtn.textContent = "Delete";
        deleteBtn.onclick = () => {
            li.remove();
            saveTasks();
        };

        rightDiv.appendChild(editBtn);
        rightDiv.appendChild(deleteBtn);

        li.appendChild(leftDiv);
        li.appendChild(rightDiv);

        taskList.appendChild(li);
    }

    function editTask(span) {
        const updatedText = prompt("Edit task:", span.textContent);
        if (updatedText !== null && updatedText.trim() !== "") {
            span.textContent = updatedText.trim();
            saveTasks();
        }
    }

    function clearAll() {
        taskList.innerHTML = "";
        saveTasks();
    }

    function saveTasks() {
        const tasks = [];
        document.querySelectorAll("#taskList li").forEach(li => {
            const text = li.querySelector("span").textContent;
            const completed = li.querySelector("input").checked;
            tasks.push({ text, completed });
        });
        localStorage.setItem("tasks", JSON.stringify(tasks));
    }

    function loadTasks() {
        const tasks = JSON.parse(localStorage.getItem("tasks")) || [];
        tasks.forEach(task => createTask(task));
    }

    taskInput.addEventListener("keypress", function (e) {
        if (e.key === "Enter") addTask();
    });

    window.onload = loadTasks;
</script>

</body>
</html>
